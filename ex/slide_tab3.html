<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- jQuery 추가 -->

</head>
<body>
    
    <div class="tab_wrap">
        <div class="tab_menu">
          <span class="active">Tab01</span>
          <span>Tab02</span>
        </div>
        <div class="tab_cont">
          <div class="swiper-container slide01">
            <div class="swiper-wrapper">
              <div class="swiper-slide">Content01</div>
              <div class="swiper-slide">Content02</div>
            </div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
          </div>
          <div class="swiper-container slide02">
            <div class="swiper-wrapper">           
              <div class="swiper-slide">Content01</div>
              <div class="swiper-slide">Content02</div>
            </div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
          </div>
        </div>
      </div>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script>
// slide01
var slide01 = new Swiper('.swiper-container.slide01', {
    spaceBetween: 16,
    slidesPerView: 'auto',
    watchOverflow : true,
    slidesOffsetBefore : 15,
    slidesOffsetAfter : 15,
    autoplay: {
            delay: 3000,
            disableOnInteraction: false,
        },
    breakpoints: {
        991 : {
            spaceBetween: 40,
        },
    },
    navigation: {
        nextEl: ".slide01 .swiper-button-next",
        prevEl: ".slide01 .swiper-button-prev",
    },   
});

// slide02
var slide02 = new Swiper('.swiper-container.slide02', {
    spaceBetween: 16,
    slidesPerView: 'auto',
    watchOverflow : true,
    slidesOffsetBefore : 15,
    slidesOffsetAfter : 15,
    autoplay: {
            delay: 3000,
            disableOnInteraction: false,
        },
    breakpoints: {
        991 : {
            spaceBetween: 40,
        },
    },
    navigation: {
        nextEl: ".slide02 .swiper-button-next",
        prevEl: ".slide02 .swiper-button-prev",
    },   
});
 
 var tabContainer = $('.tab_cont .swiper-container');
 tabContainer.hide().eq(0).show(); // 처음에 첫번째 컨텐츠만 보여준다.

  $('.tab_menu span').on('click', function(){ // 탭메뉴를 클릭했을때 이벤트 실행
  	var index = $(this).index();
    
    $(this).addClass('active'); 
    // 현재 클릭한 탭메뉴에 active클래스를 붙여준다. active된 요소를 css설정을 하기 위함
    $(this).siblings('span').removeClass('active'); 
    // 현재 클릭한 탭메뉴의 형제인 span들의 active클래스를 지운다.
    tabContainer.hide().eq(index).show();
    // 우선 컨텐츠를 전부 지우고 현재 클릭한 탭메뉴의 컨텐츠를 보여준다.
    slide02.destroy(true, false); //(인스턴스,스타일) true면 삭제, false면 유지
    // 컨텐츠들이 hide/show 되면서 display: block/none 처리가 되기때문에 오류가 발생하는것 같다.
    // 그러므로 여기서 destroy 메서드를 이용하여 slide02를 초기화를 시켜버린다.

    if(index == 1) { // 현재 클릭한 인덱스가 1이면(0,1이므로 slide02는 인덱스 1일때로 설정)
      // 한번 더 변수 설정
      slide02 = new Swiper('.swiper-container.slide02', {
        spaceBetween: 16,
        slidesPerView: 'auto',
        watchOverflow : true,
        slidesOffsetBefore : 15,
        slidesOffsetAfter : 15,

        breakpoints: {
          991 : {
          	spaceBetween: 40,
          },
        },
      	navigation: {
          nextEl: ".slide02 .swiper-button-next",
          prevEl: ".slide02 .swiper-button-prev",
        },   
      });
    };
});
</script>
</body>
</html>
